# AirOpsCat ğŸ±ğŸ’¨

ä¸€ä¸ªè½»é‡ã€çµæ´»ã€é«˜æ•ˆçš„æœåŠ¡å™¨ç®¡ç†ç³»ç»Ÿï¼Œä¿æŒæ•æ·ï¼ŒæŒæ§ä¸€åˆ‡ã€‚

[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://openjdk.java.net/projects/jdk/21/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.4-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/Build-Passing-success.svg)](https://github.com/fun90/AirOpsCat)

## ğŸ“– é¡¹ç›®ç®€ä»‹

AirOpsCat æ˜¯ä¸€ä¸ªåŸºäº Spring Boot 3.x æ„å»ºçš„ç°ä»£åŒ–æœåŠ¡å™¨ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸ºä»£ç†æœåŠ¡æä¾›å•†è®¾è®¡ã€‚ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ã€æœåŠ¡å™¨ç®¡ç†ã€èŠ‚ç‚¹é…ç½®ã€æµé‡ç»Ÿè®¡å’Œè®¢é˜…æœåŠ¡ç­‰åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§ä»£ç†åè®®å’Œå®¢æˆ·ç«¯å¹³å°ã€‚

### ğŸ¯ è®¾è®¡ç†å¿µ
- **ç®€å•å°å·§**: è½»é‡çº§æ¶æ„ï¼Œå¿«é€Ÿéƒ¨ç½²
- **æ‰©å±•æ€§å¼º**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºå®šåˆ¶
- **é«˜æ•ˆç¨³å®š**: åŸºäº Spring Boot 3.x å’Œ Java 21
- **ç”¨æˆ·å‹å¥½**: ç°ä»£åŒ– Web ç•Œé¢ï¼Œå“åº”å¼è®¾è®¡

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” ç”¨æˆ·ç®¡ç†
- å¤šè§’è‰²æƒé™æ§åˆ¶ï¼ˆç®¡ç†å‘˜ã€åˆä½œä¼™ä¼´ã€VIPç”¨æˆ·ï¼‰
- ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- ç™»å½•å¤±è´¥é”å®šæœºåˆ¶
- ç”¨æˆ·é¢æ¿è‡ªåŠ©æœåŠ¡

### ğŸ’° è´¦æˆ·ç®¡ç†
- è´¦æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†
- æµé‡é…é¢ä¸ä½¿ç”¨ç»Ÿè®¡
- åœ¨çº¿IPç›‘æ§
- è®¤è¯ç ç®¡ç†
- åˆ°æœŸæ—¶é—´æé†’

### ğŸ–¥ï¸ æœåŠ¡å™¨ç®¡ç†
- æœåŠ¡å™¨ä¿¡æ¯ç®¡ç†
- SSH è¿æ¥ç®¡ç†
- é…ç½®æ¨¡æ¿ç®¡ç†
- è‡ªåŠ¨åŒ–éƒ¨ç½²

### ğŸŒ èŠ‚ç‚¹ç®¡ç†
- å¤šåè®®æ”¯æŒï¼ˆVLESSã€Shadowsocksã€SOCKSã€Hysteria2ï¼‰
- èŠ‚ç‚¹éƒ¨ç½²ä¸é…ç½®
- æµé‡ç»Ÿè®¡
- çŠ¶æ€ç›‘æ§

### ğŸ“± è®¢é˜…æœåŠ¡
- å¤šå¹³å°å®¢æˆ·ç«¯æ”¯æŒ
- åŠ¨æ€é…ç½®ç”Ÿæˆ
- è®¤è¯ç éªŒè¯
- å®æ—¶æ›´æ–°

### ğŸ“Š æ•°æ®ç»Ÿè®¡
- æµé‡ä½¿ç”¨ç»Ÿè®¡
- åœ¨çº¿ç”¨æˆ·ç›‘æ§
- è´¢åŠ¡æµæ°´è®°å½•
- ç³»ç»Ÿè¿è¡ŒçŠ¶æ€

### ğŸ”” é€šçŸ¥æœåŠ¡
- Bark æ¨é€é€šçŸ¥
- ç³»ç»Ÿå‘Šè­¦
- ç”¨æˆ·é€šçŸ¥

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **æ¡†æ¶**: Spring Boot 3.4.4
- **è¯­è¨€**: Java 21
- **æ•°æ®åº“**: SQLite + JPA/Hibernate
- **å®‰å…¨**: Spring Security 6.x
- **æ¨¡æ¿å¼•æ“**: Thymeleaf
- **æ„å»ºå·¥å…·**: Maven + GraalVM Native Image

### å‰ç«¯æŠ€æœ¯
- **UIæ¡†æ¶**: Tabler UI 1.3.2
- **å“åº”å¼**: petite-vue 0.4.1
- **æ ·å¼**: Bootstrap 5 + CSS3
- **å›¾æ ‡**: Tabler Icons

### æ ¸å¿ƒä¾èµ–
- **SSHå®¢æˆ·ç«¯**: JSch
- **JSONå¤„ç†**: Jackson
- **å·¥å…·åº“**: Apache Commons
- **åŠ å¯†**: Commons Codec
- **æ˜ å°„**: MapStruct

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6+ æˆ–ä½¿ç”¨é¡¹ç›®å†…ç½®çš„ Maven Wrapper
- ç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰

### æ–¹å¼ä¸€ï¼šä¸‹è½½é¢„æ„å»ºç‰ˆæœ¬ï¼ˆjschå…¼å®¹é—®æœªè§£å†³ï¼‰

ä» [GitHub Releases](https://github.com/fun90/AirOpsCat/releases) ä¸‹è½½å¯¹åº”å¹³å°çš„ native å¯æ‰§è¡Œæ–‡ä»¶ï¼š

- **Linux**: `airopscat-linux-amd64.tar.gz`
- **macOS**: `airopscat-macos-amd64.tar.gz`
- **Windows**: `airopscat-windows-amd64.exe.zip`

è§£å‹åç›´æ¥è¿è¡Œï¼Œæ— éœ€å®‰è£… Java ç¯å¢ƒï¼š

```bash
# Linux/macOS
./airopscat

# Windows
airopscat.exe
```

### æ–¹å¼äºŒï¼šæ ‡å‡† JAR æ„å»º

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/fun90/AirOpsCat.git
cd AirOpsCat

# æ„å»ºé¡¹ç›®
./mvnw clean package

# è¿è¡Œåº”ç”¨
java -jar target/airopscat-1.0.2.jar
```

### æ–¹å¼ä¸‰ï¼šNative å¯æ‰§è¡Œæ–‡ä»¶æ„å»º

éœ€è¦å®‰è£… [GraalVM 21](https://www.graalvm.org/downloads/) å’Œ Native Imageï¼š

```bash
# æ„å»º native å¯æ‰§è¡Œæ–‡ä»¶
./mvnw -Pnative native:compile

# è¿è¡Œ
./target/airopscat
```

è¯¦ç»†çš„ native æ„å»ºè¯´æ˜è¯·å‚è€ƒ [Native Build Guide](docs/native-build-guide.md)ã€‚

## âš™ï¸ é…ç½®è¯´æ˜

### åŸºç¡€é…ç½®

åˆ›å»º `application.properties` æ–‡ä»¶æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```properties
# åº”ç”¨åŸºç¡€é…ç½®
spring.application.name=AirOpsCat
server.port=8080

# æ•°æ®åº“é…ç½®
spring.datasource.url=jdbc:sqlite:admin.db
spring.datasource.driver-class-name=org.sqlite.JDBC

# JPAé…ç½®
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.hibernate.ddl-auto=update

# å®‰å…¨é…ç½®
airopscat.crypto.secret-key=your-secret-key-here

# è®¢é˜…æœåŠ¡é…ç½®
airopscat.subscription.url=http://your-domain.com/subscribe

# SSHé…ç½®
airopscat.ssh.provider=jsch

# åœ¨çº¿IPç»Ÿè®¡é…ç½®
airopscat.online.check-minutes=5

# Barké€šçŸ¥é…ç½®
airopscat.bark.url=https://api.day.app/YOUR_DEVICE_KEY
airopscat.bark.device-key=your-device-key
```

### ç¯å¢ƒå˜é‡æ”¯æŒ

```bash
export AIROPSCAT_CRYPTO_SECRET_KEY="your-secret-key"
export AIROPSCAT_SUBSCRIPTION_URL="http://your-domain.com/subscribe"
export AIROPSCAT_BARK_URL="https://api.day.app/YOUR_DEVICE_KEY"
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
AirOpsCat/
â”œâ”€â”€ src/main/java/com/fun90/airopscat/
â”‚   â”œâ”€â”€ AirOpsCatApplication.java          # åº”ç”¨å¯åŠ¨ç±»
â”‚   â”œâ”€â”€ annotation/                        # è‡ªå®šä¹‰æ³¨è§£
â”‚   â”œâ”€â”€ config/                           # é…ç½®ç±»
â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java           # å®‰å…¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ WebConfig.java                # Webé…ç½®
â”‚   â”‚   â””â”€â”€ ssh/                          # SSHé…ç½®
â”‚   â”œâ”€â”€ controller/                       # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ HomeController.java           # ä¸»é¡µæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ AuthController.java           # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ AccountController.java        # è´¦æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ model/                           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ enums/                       # æšä¸¾ç±»
â”‚   â”‚   â””â”€â”€ vo/                          # è§†å›¾å¯¹è±¡
â”‚   â”œâ”€â”€ repository/                      # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ service/                         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ core/                        # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ssh/                         # SSHæœåŠ¡
â”‚   â”‚   â””â”€â”€ xray/                        # XrayæœåŠ¡
â”‚   â””â”€â”€ utils/                           # å·¥å…·ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ static/                          # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ css/                         # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ js/                          # JavaScriptæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ img/                         # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ templates/                       # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ fragments/                   # é¡µé¢ç‰‡æ®µ
â”‚   â”‚   â””â”€â”€ subscription/                # è®¢é˜…æ¨¡æ¿
â”‚   â””â”€â”€ application.properties           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                               # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ logs/                               # æ—¥å¿—ç›®å½•
â””â”€â”€ pom.xml                             # Mavené…ç½®
```

## ğŸ”§ API æ¥å£

### è®¤è¯æ¥å£
- `POST /api/login/auth` - ç”¨æˆ·ç™»å½•
- `POST /api/logout` - ç”¨æˆ·ç™»å‡º

### ç”¨æˆ·ç®¡ç†æ¥å£
- `GET /api/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/admin/users` - åˆ›å»ºç”¨æˆ·
- `PUT /api/admin/users/{id}` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/admin/users/{id}` - åˆ é™¤ç”¨æˆ·

### è´¦æˆ·ç®¡ç†æ¥å£
- `GET /api/admin/accounts` - è·å–è´¦æˆ·åˆ—è¡¨
- `POST /api/admin/accounts` - åˆ›å»ºè´¦æˆ·
- `PUT /api/admin/accounts/{id}` - æ›´æ–°è´¦æˆ·
- `GET /api/admin/accounts/stats` - è·å–è´¦æˆ·ç»Ÿè®¡

### æœåŠ¡å™¨ç®¡ç†æ¥å£
- `GET /api/admin/servers` - è·å–æœåŠ¡å™¨åˆ—è¡¨
- `POST /api/admin/servers` - åˆ›å»ºæœåŠ¡å™¨
- `PUT /api/admin/servers/{id}` - æ›´æ–°æœåŠ¡å™¨

### èŠ‚ç‚¹ç®¡ç†æ¥å£
- `GET /api/admin/nodes` - è·å–èŠ‚ç‚¹åˆ—è¡¨
- `POST /api/admin/nodes` - åˆ›å»ºèŠ‚ç‚¹
- `PUT /api/admin/nodes/{id}` - æ›´æ–°èŠ‚ç‚¹
- `POST /api/admin/nodes/{id}/deploy` - éƒ¨ç½²èŠ‚ç‚¹

### è®¢é˜…æ¥å£
- `GET /subscribe/{authCode}/{osName}/{appName}` - è·å–è®¢é˜…é…ç½®

### é€šçŸ¥æ¥å£
- `POST /api/bark/notify` - å‘é€Barké€šçŸ¥
- `GET /api/bark/status` - è·å–é€šçŸ¥çŠ¶æ€

## ğŸŒ æ”¯æŒçš„å®¢æˆ·ç«¯

### Android/HarmonyOS
- **Clash Meta for Android**
- **Clash Meta for HarmonyOS**

### iOS
- **Shadowrocket**
- **Stash**
- **Loon**

### Windows/macOS/Linux
- **Clash Verge**

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- Spring Security é›†æˆ
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
- å¯†ç åŠ å¯†å­˜å‚¨ (BCrypt)
- ç™»å½•å¤±è´¥é”å®šæœºåˆ¶
- CSRF é˜²æŠ¤
- ä¼šè¯ç®¡ç†
- æ•æ„Ÿæ•°æ®åŠ å¯†

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—é…ç½®
- æ—¥å¿—æ–‡ä»¶è‡ªåŠ¨è½®è½¬
- æŒ‰æ—¥æœŸåˆ†å‰²æ—¥å¿—
- å¯é…ç½®æ—¥å¿—çº§åˆ«
- ç»“æ„åŒ–æ—¥å¿—è¾“å‡º

### ç³»ç»Ÿç›‘æ§
- åœ¨çº¿ç”¨æˆ·ç»Ÿè®¡
- æµé‡ä½¿ç”¨ç›‘æ§
- æœåŠ¡å™¨çŠ¶æ€ç›‘æ§
- èŠ‚ç‚¹å¥åº·æ£€æŸ¥

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²ï¼ˆæœªæµ‹è¯•ï¼‰

```dockerfile
FROM openjdk:21-jre-slim
COPY target/airopscat-1.0.2.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

### ç³»ç»ŸæœåŠ¡éƒ¨ç½²

ä½¿ç”¨é¡¹ç›®æä¾›çš„ systemd æœåŠ¡æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶æœåŠ¡æ–‡ä»¶
sudo cp src/main/assembly/bin/setup-systemd.sh /usr/local/bin/
sudo chmod +x /usr/local/bin/setup-systemd.sh

# å®‰è£…æœåŠ¡
sudo /usr/local/bin/setup-systemd.sh
```

### åå‘ä»£ç†é…ç½®

#### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¼€å‘ç¯å¢ƒæ­å»º

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª Java ç¼–ç è§„èŒƒ
- ä½¿ç”¨ Lombok ç®€åŒ–ä»£ç 
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ç¼–å†™å•å…ƒæµ‹è¯•

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.2 (æœ€æ–°)
- æ–°å¢ç”¨æˆ·é¢æ¿åŠŸèƒ½
- ä¼˜åŒ–åœ¨çº¿IPç»Ÿè®¡
- å¢å¼ºBarké€šçŸ¥æœåŠ¡
- æ”¹è¿›è®¢é˜…æ¨¡æ¿ç³»ç»Ÿ
- ä¿®å¤å·²çŸ¥é—®é¢˜

### v1.0.1
- æ·»åŠ å¤šåè®®æ”¯æŒ
- ä¼˜åŒ–SSHè¿æ¥ç®¡ç†
- æ”¹è¿›å®‰å…¨é…ç½®

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€åŠŸèƒ½å®ç°

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Spring Boot](https://spring.io/projects/spring-boot) - ä¼˜ç§€çš„Javaæ¡†æ¶
- [Tabler UI](https://tabler.io/) - ç°ä»£åŒ–çš„UIç»„ä»¶åº“
- [petite-vue](https://github.com/vuejs/petite-vue) - è½»é‡çº§Vue.js
- [GraalVM](https://www.graalvm.org/) - Native Imageæ”¯æŒ

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®åœ°å€**: [https://github.com/fun90/AirOpsCat](https://github.com/fun90/AirOpsCat)
- **é—®é¢˜åé¦ˆ**: [Issues](https://github.com/fun90/AirOpsCat/issues)
- **è®¨è®ºäº¤æµ**: [Discussions](https://github.com/fun90/AirOpsCat/discussions)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼

